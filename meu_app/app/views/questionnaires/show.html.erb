<div class="w-full">
  <%# Detalhes do Questionário %>
  <%= render @questionnaire %>

  <div class="my-5">
    <%= link_to "Editar este questionário", edit_questionnaire_path(@questionnaire), class: "rounded-lg py-3 px-5 bg-gray-100 inline-block font-medium" %>
    <%= link_to "Voltar para questionários", questionnaires_path, class: "rounded-lg py-3 ml-2 px-5 bg-gray-100 inline-block font-medium" %>
  </div>

  <%# Seção para as Perguntas e Opções %>
  <div class="mt-8 border-t pt-8">
    <h2 class="text-2xl font-bold mb-4">Perguntas</h2>

    <%= link_to "Adicionar Nova Pergunta", new_question_path(questionnaire_id: @questionnaire.id), class: "rounded-lg py-3 px-5 bg-blue-600 text-white inline-block font-medium mb-4" %>

    <div id="questions" class="space-y-6"> <%# Aumentei o espaçamento %>
      <% if @questionnaire.questions.any? %>
        <% @questionnaire.questions.each do |question| %>
          <div class="p-4 border rounded-lg bg-white shadow-sm">
            <p class="font-semibold text-lg"><%= question.text %></p>

            <%# --- NOVO BLOCO PARA OPÇÕES --- %>
            <div class="mt-4 pl-4">
              <h4 class="text-md font-bold mb-2">Opções:</h4>
              <div class="space-y-2">
                <% if question.options.any? %>
                  <% question.options.each do |option| %>
                    <div class="flex items-center">
                      <span class="mr-2"><%= option.correct? ? "✅" : "❌" %></span>
                      <span><%= option.text %></span>
                    </div>
                  <% end %>
                <% else %>
                  <p class="text-gray-500 text-sm">Esta pergunta ainda não possui opções.</p>
                <% end %>
              </div>

              <%# Link para adicionar uma nova opção a esta pergunta específica %>
              <div class="mt-3">
                <%= link_to "Adicionar Opção", new_option_path(question_id: question.id), class: "text-sm text-blue-600 hover:underline" %>
              </div>
            </div>
            <%# --- FIM DO NOVO BLOCO --- %>

          </div>
        <% end %>
      <% else %>
        <p class="text-gray-500">Este questionário ainda não possui perguntas.</p>
      <% end %>
    </div>
  </div>
</div>